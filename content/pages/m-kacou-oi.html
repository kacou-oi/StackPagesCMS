<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="site-title">M. Kacou Oi</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body::-webkit-scrollbar {
            width: 8px;
        }
        body::-webkit-scrollbar-track {
            background: #f0f0f0;
        }
        body::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 4px;
        }
        body::-webkit-scrollbar-thumb:hover {
            background: #94a3b8;
        }

        .modal-fade-enter-active, .modal-fade-leave-active {
            transition: opacity 0.3s ease, transform 0.3s ease;
        }
        .modal-fade-enter-from, .modal-fade-leave-to {
            opacity: 0;
            transform: scale(0.95);
        }
        .modal-fade-enter-to, .modal-fade-leave-from {
            opacity: 1;
            transform: scale(1);
        }

        .article-content img {
            max-width: 100%;
            height: auto;
            border-radius: 8px;
            margin-top: 1rem;
            margin-bottom: 1rem;
            display: block;
        }
        .article-content a {
            color: #3b82f6;
            text-decoration: underline;
        }
        .article-content h1, .article-content h2, .article-content h3, .article-content h4, .article-content h5, .article-content h6 {
            font-weight: 700;
            margin-top: 1.5rem;
            margin-bottom: 0.5rem;
            color: #1a202c; /* gray-900 */
        }
        .article-content h1 { font-size: 2.25rem; } /* text-4xl */
        .article-content h2 { font-size: 2rem; }   /* text-3xl */
        .article-content h3 { font-size: 1.75rem; } /* text-2xl */
        .article-content h4 { font-size: 1.5rem; }  /* text-xl */
        .article-content p {
            margin-bottom: 1rem;
            line-height: 1.6;
            color: #4a5568; /* gray-700 */
        }
        .article-content ul, .article-content ol {
            list-style-position: outside;
            margin-bottom: 1rem;
            padding-left: 1.5rem;
            color: #4a5568; /* gray-700 */
        }
        .article-content ul li {
            list-style-type: disc;
            margin-bottom: 0.5rem;
        }
        .article-content ol li {
            list-style-type: decimal;
            margin-bottom: 0.5rem;
        }
        .article-content blockquote {
            border-left: 4px solid #cbd5e1;
            padding-left: 1rem;
            margin-left: 0.5rem;
            font-style: italic;
            color: #64748b;
            margin-top: 1rem;
            margin-bottom: 1rem;
        }
        .article-content pre {
            background-color: #e2e8f0; /* gray-200 */
            padding: 1rem;
            border-radius: 0.5rem;
            overflow-x: auto;
            margin-top: 1rem;
            margin-bottom: 1rem;
        }
        .article-content code {
            font-family: monospace;
            background-color: #e2e8f0; /* gray-200 */
            padding: 0.2em 0.4em;
            border-radius: 0.25rem;
        }
        .article-content table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1rem;
            margin-bottom: 1rem;
        }
        .article-content th, .article-content td {
            border: 1px solid #e2e8f0; /* gray-200 */
            padding: 0.75rem;
            text-align: left;
        }
        .article-content th {
            background-color: #f8fafc; /* gray-50 */
            font-weight: 600;
        }
        @keyframes fade-in {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in {
            animation: fade-in 0.7s ease-out forwards;
        }

        /* Tooltip styles */
        .tooltip {
            position: relative;
            display: inline-block;
        }

        .tooltip .tooltiptext {
            visibility: hidden;
            width: 200px; /* Adjust width as needed */
            background-color: rgba(0, 0, 0, 0.8);
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 8px 10px;
            position: absolute;
            z-index: 10;
            top: 125%; /* Position below the button */
            left: 50%;
            margin-left: -100px; /* Center the tooltip */
            opacity: 0;
            transition: opacity 0.3s, visibility 0.3s;
            font-size: 0.875rem; /* sm */
            line-height: 1.25rem; /* sm */
            white-space: normal; /* Allow text to wrap */
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }

        .tooltip .tooltiptext::after {
            content: "";
            position: absolute;
            bottom: 100%; /* Arrow points up */
            left: 50%;
            margin-left: -5px;
            border-width: 5px;
            border-style: solid;
            border-color: transparent transparent rgba(0, 0, 0, 0.8) transparent; /* Arrow color */
        }

        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }
    </style>
</head>
<body class="font-sans antialiased text-gray-800 bg-gray-50 flex flex-col min-h-screen">

    <!-- Header -->
    <header class="fixed top-0 left-0 right-0 z-40 bg-white/80 backdrop-blur-md shadow-sm">
        <nav class="container mx-auto px-4 py-3 flex items-center justify-between relative">
            <!-- Left Group: Logo and Podcast Player -->
            <div class="flex items-center space-x-4 md:space-x-6">
                <a href="#home" class="flex items-center text-xl font-bold text-gray-900 hover:text-blue-600 transition-colors" id="header-logo-link">
                    <img id="header-logo" src="" alt="Logo" class="h-8 mr-2 transition-transform hover:scale-105" onerror="this.style.display='none';">
                    <span id="header-site-name" class="">M. Kacou Oi</span>
                </a>
                <!-- Podcast Player in Header -->
                <div id="header-podcast-player-container" class="hidden md:flex items-center space-x-2 rounded-full shadow-sm px-2 py-1">
                    <div class="flex flex-col items-center justify-center py-2 text-blue-600">
                        <div class="animate-spin rounded-full h-5 w-5 border-t-2 border-b-2 border-blue-500 mb-0.5"></div>
                        <p class="text-xs font-semibold">Loading...</p>
                    </div>
                </div>
            </div>

            <!-- Main Navigation (Desktop) - Centered absolutely -->
            <div class="hidden md:flex space-x-8 absolute left-1/2 -translate-x-1/2 z-20">
                <a href="#home" class="header-nav-link hover:text-blue-600 transition-colors relative group py-2 text-blue-600 font-semibold">
                    Accueil
                    <span class="absolute bottom-0 left-0 w-0 h-0.5 bg-blue-600 group-hover:w-full transition-all duration-300" style="width: 100%;"></span>
                </a>
                <a href="#publications" class="header-nav-link hover:text-blue-600 transition-colors relative group py-2 text-gray-600">
                    Publications
                    <span class="absolute bottom-0 left-0 w-0 h-0.5 bg-blue-600 group-hover:w-full transition-all duration-300" style="width: 0px;"></span>
                </a>
                <a href="#videos" class="header-nav-link hover:text-blue-600 transition-colors relative group py-2 text-gray-600">
                    Vidéos
                    <span class="absolute bottom-0 left-0 w-0 h-0.5 bg-blue-600 group-hover:w-full transition-all duration-300" style="width: 0px;"></span>
                </a>
                <a href="#contact" class="header-nav-link hover:text-blue-600 transition-colors relative group py-2 text-gray-600">
                    Contact
                    <span class="absolute bottom-0 left-0 w-0 h-0.5 bg-blue-600 group-hover:w-full transition-all duration-300" style="width: 0px;"></span>
                </a>
            </div>
            
            <!-- Right Group: Mobile Menu Button and Contact Button -->
            <div class="flex items-center space-x-4">
                <button class="md:hidden p-2 text-gray-600 hover:text-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded-md" id="mobile-menu-button">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
                </button>
                <a href="#contact" class="hidden md:block bg-blue-600 text-white px-5 py-2 rounded-full shadow-lg hover:bg-blue-700 transition-all duration-300 transform hover:scale-105">
                    Me Contacter
                </a>
            </div>
        </nav>
        <div id="mobile-menu-overlay" class="fixed inset-0 bg-black/50 z-40 hidden md:hidden"></div>
        <div id="mobile-menu" class="fixed top-0 right-0 h-full w-64 bg-white shadow-xl transform translate-x-full transition-transform duration-300 ease-in-out z-50 md:hidden">
            <div class="p-6">
                <button class="absolute top-4 right-4 text-gray-500 hover:text-gray-700" id="close-mobile-menu">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                </button>
                <div class="mt-8 flex flex-col space-y-4">
                    <a href="#home" class="text-lg text-gray-700 hover:text-blue-600 transition-colors block py-2 px-3 rounded-md hover:bg-gray-100 text-blue-600 font-semibold">Accueil</a>
                    <a href="#publications" class="text-lg text-gray-700 hover:text-blue-600 transition-colors block py-2 px-3 rounded-md hover:bg-gray-100 text-gray-600">Publications</a>
                    <a href="#videos" class="text-lg text-gray-700 hover:text-blue-600 transition-colors block py-2 px-3 rounded-md hover:bg-gray-100 text-gray-600">Vidéos</a>
                    <a href="#contact" class="text-lg text-gray-700 hover:text-blue-600 transition-colors block py-2 px-3 rounded-md hover:bg-gray-100 text-gray-600">Contact</a>
                    <a href="#contact" class="bg-blue-600 text-white text-center px-5 py-3 rounded-full shadow-lg hover:bg-blue-700 transition-colors mt-4 text-gray-600">Me Contacter</a>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content Area -->
    <main id="main-content" class="flex-grow pt-20">
        <!-- Content will be dynamically loaded here by JavaScript -->
    </main>

    <!-- Article Modal -->
    <div id="article-modal" class="fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50 overflow-y-auto hidden modal-fade-leave-to">
        <div class="bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto relative transform transition-all duration-300">
            <button class="absolute top-4 right-4 text-gray-500 hover:text-gray-700 transition-colors z-10" id="close-article-modal">
                <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
            </button>
            <div id="article-modal-content" class="relative">
                <img id="modal-article-image" src="https://via.placeholder.com/800x400/edf2f7/4a5568?text=Image+de+Couverture" alt="Image de Couverture" class="w-full h-64 object-cover rounded-t-lg mb-6">
                <div class="p-6 md:p-8 lg:p-10">
                    <h2 id="modal-article-title" class="text-3xl md:text-4xl font-extrabold text-gray-900 mb-4 leading-tight">Titre de l'article</h2>
                    <p class="text-gray-500 text-sm mb-6">
                        Par <span id="modal-article-author" class="font-medium">Inconnu</span> le <span id="modal-article-pubdate">Date de publication</span>
                    </p>
                    <div id="modal-article-body" class="max-w-none text-gray-700 leading-relaxed article-content"><p>Contenu de l'article.</p></div>
                    <div class="mt-8 pt-6 border-t border-gray-200 flex flex-wrap gap-4 items-center justify-center">
                        <span class="text-gray-600 text-lg font-semibold mr-2">Partager:</span>
                        <a id="share-facebook" href="#" target="_blank" class="flex items-center justify-center w-10 h-10 rounded-full bg-blue-600 text-white hover:bg-blue-700 transition-colors transform hover:scale-110" aria-label="Partager sur Facebook">
                            <svg fill="currentColor" viewBox="0 0 24 24" class="w-5 h-5"><path d="M14 13.5h2.001l.4-2.001H14v-1.144c0-.573.284-.856.856-.856h1.145V8.001h-2.001c-2.4 0-3.145 1.745-3.145 3.145V13.5H9.5V15.5h2.501V22h3.999V15.5H18L17 13.5h-3z"></path></svg>
                        </a>
                        <a id="share-twitter" href="#" target="_blank" class="flex items-center justify-center w-10 h-10 rounded-full bg-blue-400 text-white hover:bg-blue-500 transition-colors transform hover:scale-110" aria-label="Partager sur X (Twitter)">
                            <svg fill="currentColor" viewBox="0 0 24 24" class="w-5 h-5"><path d="M18.244 2.25h3.308l-7.227 8.26L21.602 22H15.6L10.957 13.992L4.397 22H0L7.735 13.143L0.99 2.25h7.227L12.987 9.847L18.244 2.25Zm-2.349 1.4L7.404 21.006h2.842L17.595 3.65H15.895Z"></path></svg>
                        </a>
                        <a id="share-linkedin" href="#" target="_blank" class="flex items-center justify-center w-10 h-10 rounded-full bg-blue-700 text-white hover:bg-blue-800 transition-colors transform hover:scale-110" aria-label="Partager sur LinkedIn">
                            <svg fill="currentColor" viewBox="0 0 24 24" class="w-5 h-5"><path d="M20.447 20.452h-3.518v-5.595c0-1.332-.51-2.247-1.684-2.247-1.282 0-2.007.868-2.333 1.708-.12.302-.15.725-.15 1.157v4.977h-3.519s.047-9.664 0-10.648h3.519v1.503c-.027.051-.054.09-.08.13-.393-.683-.872-1.397-2.185-1.397-2.668 0-4.665 1.789-4.665 5.595v5.807H3.882V9.804h3.519v1.503a3.52 3.52 0 0 0 .15-.13c.42-.69.878-1.397 2.277-1.397 2.916 0 5.105 2.156 5.105 6.777v5.807h3.518V14.15c0-2.31-.01-3.6-0.01-3.6zM6.92 5.275a2.27 2.27 0 1 1-4.54 0 2.27 2.27 0 0 1 4.54 0z"></path></svg>
                        </a>
                        <a id="share-mail" href="#" target="_blank" class="flex items-center justify-center w-10 h-10 rounded-full bg-gray-600 text-white hover:bg-gray-700 transition-colors transform hover:scale-110" aria-label="Partager par E-mail">
                            <svg fill="currentColor" viewBox="0 0 24 24" class="w-5 h-5"><path d="M22 6c0-1.1-.9-2-2-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6zm-2 0l-8 5-8-5h16zm0 12H4V8l8 5 8-5v10z"></path></svg>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Video Modal -->
    <div id="video-modal" class="fixed inset-0 bg-black/90 flex items-center justify-center p-4 z-50 hidden modal-fade-leave-to">
        <div class="relative w-full max-w-4xl aspect-video bg-gray-900 rounded-lg shadow-xl transform transition-all duration-300">
            <button class="absolute -top-10 right-0 text-white hover:text-gray-300 transition-colors z-10" id="close-video-modal">
                <svg class="w-10 h-10" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
            </button>
            <iframe id="video-player" class="w-full h-full rounded-lg" src="" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>
        </div>
    </div>


    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-8 mt-auto">
        <div class="container mx-auto px-4 text-center">
            <div class="flex flex-wrap justify-center gap-x-6 gap-y-2 mb-4">
                <a href="#home" class="footer-nav-link hover:text-white transition-colors text-white">Accueil</a>
                <a href="#publications" class="footer-nav-link text-gray-300 hover:text-white transition-colors">Publications</a>
                <a href="#videos" class="footer-nav-link text-gray-300 hover:text-white transition-colors">Vidéos</a>
                <a href="#contact" class="footer-nav-link text-gray-300 hover:text-white transition-colors">Contact</a>
            </div>
            <p class="text-gray-400">© 2025 <span id="footer-site-name-copyright">M. Kacou Oi</span>. Tous droits réservés.</p>
        </div>
    </footer>

    <script>
        const mainContent = document.getElementById('main-content');
        const siteTitleElem = document.getElementById('site-title');
        const headerLogo = document.getElementById('header-logo');
        const headerLogoLink = document.getElementById('header-logo-link');
        const headerSiteName = document.getElementById('header-site-name');
        const footerSiteNameCopyright = document.getElementById('footer-site-name-copyright');
        
        const mobileMenuButton = document.getElementById('mobile-menu-button');
        const mobileMenu = document.getElementById('mobile-menu');
        const closeMobileMenu = document.getElementById('close-mobile-menu');
        const mobileMenuOverlay = document.getElementById('mobile-menu-overlay');

        let allPosts = [];
        let allVideos = [];
        let allPodcasts = [];
        let currentPodcastIndex = 0;
        const itemsPerPage = 6; // Changed from 9 to 6 as per request
        let currentPostsPage = 1;
        let currentVideosPage = 1;

        const articleModal = document.getElementById('article-modal');
        const closeArticleModal = document.getElementById('close-article-modal');
        const videoModal = document.getElementById('video-modal');
        const closeVideoModal = document.getElementById('close-video-modal');
        const videoPlayer = document.getElementById('video-player');

        async function fetchMetadata() {
            try {
                const response = await fetch(window.location.origin + '/api/metadata');
                if (!response.ok) throw new Error('Failed to fetch metadata');
                const metadata = await response.json();
                siteTitleElem.textContent = metadata.title || 'Mon Site Web';
                headerSiteName.textContent = metadata.title || 'Mon Site Web';
                footerSiteNameCopyright.textContent = metadata.title || 'Mon Site Web';
                if (metadata.logo) {
                    headerLogo.src = metadata.logo;
                    headerLogo.style.display = 'block';
                } else {
                    headerLogo.style.display = 'none';
                }
            } catch (error) {
                console.error('Error fetching metadata:', error);
                siteTitleElem.textContent = 'Erreur de chargement';
                headerSiteName.textContent = 'Mon Site Web';
                footerSiteNameCopyright.textContent = 'Mon Site Web';
                headerLogo.style.display = 'none';
            }
        }

        function closeAllModals() {
            // Add modal-fade-leave-to first to trigger transition, then hide
            articleModal.classList.add('modal-fade-leave-to');
            articleModal.classList.remove('modal-fade-enter-to');
            videoModal.classList.add('modal-fade-leave-to');
            videoModal.classList.remove('modal-fade-enter-to');

            // Wait for transition to finish before adding 'hidden'
            setTimeout(() => {
                articleModal.classList.add('hidden');
                videoModal.classList.add('hidden');
            }, 300); // Duration of modal-fade-leave-active transition

            if (videoPlayer) videoPlayer.src = '';
            // Removed podcast player pause from here to allow it to continue playing when modals are closed or tabs are changed.
        }

        // Modified modal open to handle transitions
        function openModalWithTransition(modalElement) {
            modalElement.classList.remove('hidden');
            // Allow a tiny reflow for the browser to register 'hidden' removal before adding 'enter-to'
            requestAnimationFrame(() => {
                requestAnimationFrame(() => {
                    modalElement.classList.remove('modal-fade-leave-to');
                    modalElement.classList.add('modal-fade-enter-to');
                });
            });
            document.body.classList.add('overflow-hidden');
        }


        closeArticleModal.addEventListener('click', closeAllModals);
        articleModal.addEventListener('click', (e) => {
            if (e.target === articleModal) closeAllModals();
        });

        closeVideoModal.addEventListener('click', closeAllModals);
        videoModal.addEventListener('click', (e) => {
            if (e.target === videoModal) closeAllModals();
        });

        function showLoading() {
            mainContent.innerHTML = `
                <div class="flex flex-col items-center justify-center min-h-[calc(100vh-80px-48px)] text-blue-600">
                    <div class="animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-blue-500"></div>
                    <p class="mt-4 text-xl font-semibold">Chargement du contenu...</p>
                </div>
            `;
            window.scrollTo(0, 0);
        }

        async function renderHomePage() {
            mainContent.innerHTML = `
                <section class="relative bg-gradient-to-br from-blue-500 to-blue-700 text-white py-20 md:py-32 overflow-hidden shadow-xl">
                    <div class="absolute inset-0 bg-blue-800/20 opacity-10"></div>
                    <div class="container mx-auto px-6 relative z-10 text-center">
                        <img src="https://raw.githubusercontent.com/kacou-oi/StackPagesCMS/main/content/images/1764728284077-photo-de-profil-pro.jpg" alt="Photo de profil" class="w-28 h-28 rounded-full object-cover mx-auto mb-6 border-4 border-white shadow-lg animate-fade-in-up transform hover:scale-110 transition-transform duration-500 delay-100">
                        <h1 class="text-4xl md:text-6xl font-extrabold leading-tight mb-6 animate-fade-in-up delay-200">
                            Bienvenue sur mon univers digital
                        </h1>
                        <p class="text-lg md:text-xl mb-10 max-w-3xl mx-auto opacity-90 animate-fade-in-up delay-300">
                            Explorez mes publications, découvrez mes projets et connectons-nous.
                        </p>
                        <a href="#publications" class="bg-white text-blue-600 px-8 py-3 rounded-full text-lg font-semibold shadow-lg hover:bg-gray-100 hover:scale-105 transition-all duration-300 inline-block animate-fade-in-up delay-400">
                            Découvrir les Publications
                        </a>
                    </div>
                </section>

                <section class="py-16 md:py-24 bg-gray-50">
                    <div class="container mx-auto px-6 flex flex-col md:flex-row items-center gap-12">
                        <div class="md:w-1/2">
                            <img src="https://images.pexels.com/photos/5384448/pexels-photo-5384448.jpeg?auto=compress&amp;cs=tinysrgb&amp;h=650&amp;w=940" alt="À propos de moi" class="rounded-xl shadow-2xl transform hover:scale-105 transition-transform duration-500 ease-in-out border-4 border-white">
                        </div>
                        <div class="md:w-1/2 text-center md:text-left">
                            <h2 class="text-4xl font-extrabold text-gray-900 mb-6">À Propos de Moi</h2>
                            <p class="text-lg text-gray-700 leading-relaxed mb-6">
                                Passionné par le développement web dynamique et l'innovation technologique, je mets mon expertise au service de projets ambitieux. Mon parcours est jalonné de succès dans la création de solutions digitales performantes et esthétiques, toujours à la pointe des dernières tendances.
                            </p>
                            <p class="text-lg text-gray-700 leading-relaxed">
                                J'aime transformer des idées complexes en expériences utilisateur fluides et intuitives. Chaque projet est une opportunité de repousser les limites et de créer de la valeur durable pour mes clients et utilisateurs.
                            </p>
                        </div>
                    </div>
                </section>

                <section class="py-16 md:py-24 bg-white">
                    <div class="container mx-auto px-6">
                        <h2 class="text-4xl font-extrabold text-gray-900 text-center mb-12">Mes Domaines d'Expertise</h2>
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                            <div class="bg-gradient-to-br from-blue-50 to-indigo-100 rounded-xl p-8 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-2 group">
                                <div class="flex items-center justify-center w-16 h-16 bg-blue-500 text-white rounded-full mb-6 mx-auto group-hover:rotate-6 transition-transform duration-300">
                                    <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17L9 20l-3 1h2m0-11V9a2 2 0 00-2-2L6 5V4c0-1.105.895-2 2-2h4c1.105 0 2 .895 2 2v2l-1-1h-2a2 2 0 00-2 2v2m0 0a2 2 0 012 2v2a2 2 0 01-2 2H9a2 2 0 01-2-2v-2a2 2 0 012-2m-1 9L6 20"></path></svg>
                                </div>
                                <h3 class="text-2xl font-bold text-gray-900 mb-4 text-center">Développement Front-end</h3>
                                <p class="text-gray-700 text-center leading-relaxed">
                                    Création d'interfaces utilisateur réactives et intuitives avec les dernières technologies (React, Vue, Angular, Tailwind CSS).
                                </p>
                            </div>
                            <div class="bg-gradient-to-br from-purple-50 to-pink-100 rounded-xl p-8 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-2 group">
                                <div class="flex items-center justify-center w-16 h-16 bg-purple-500 text-white rounded-full mb-6 mx-auto group-hover:rotate-6 transition-transform duration-300">
                                    <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 12h14M12 5l7 7-7 7"></path></svg>
                                </div>
                                <h3 class="text-2xl font-bold text-gray-900 mb-4 text-center">Développement Back-end</h3>
                                <p class="text-gray-700 text-center leading-relaxed">
                                    Conception et implémentation de systèmes robustes et scalables (Node.js, Python, PHP, bases de données).
                                </p>
                            </div>
                            <div class="bg-gradient-to-br from-green-50 to-teal-100 rounded-xl p-8 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-2 group">
                                <div class="flex items-center justify-center w-16 h-16 bg-green-500 text-white rounded-full mb-6 mx-auto group-hover:rotate-6 transition-transform duration-300">
                                    <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 17L15 7M15 7L21 7M15 7L15 13"></path></svg>
                                </div>
                                <h3 class="text-2xl font-bold text-gray-900 mb-4 text-center">API & Intégrations</h3>
                                <p class="text-gray-700 text-center leading-relaxed">
                                    Création d'APIs RESTful et intégration fluide avec des services tiers pour des écosystèmes connectés.
                                </p>
                            </div>
                            <div class="bg-gradient-to-br from-yellow-50 to-orange-100 rounded-xl p-8 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-2 group">
                                <div class="flex items-center justify-center w-16 h-16 bg-yellow-500 text-white rounded-full mb-6 mx-auto group-hover:rotate-6 transition-transform duration-300">
                                    <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"></path></svg>
                                </div>
                                <h3 class="text-2xl font-bold text-gray-900 mb-4 text-center">Performance & SEO</h3>
                                <p class="text-gray-700 text-center leading-relaxed">
                                    Optimisation des performances web et des stratégies SEO pour une meilleure visibilité et expérience utilisateur.
                                </p>
                            </div>
                             <div class="bg-gradient-to-br from-red-50 to-orange-100 rounded-xl p-8 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-2 group">
                                <div class="flex items-center justify-center w-16 h-16 bg-red-500 text-white rounded-full mb-6 mx-auto group-hover:rotate-6 transition-transform duration-300">
                                    <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8V6m0 10v2M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                                </div>
                                <h3 class="text-2xl font-bold text-gray-900 mb-4 text-center">UX/UI Design</h3>
                                <p class="text-gray-700 text-center leading-relaxed">
                                    Conception d'expériences utilisateur exceptionnelles et d'interfaces intuitives et esthétiques.
                                </p>
                            </div>
                             <div class="bg-gradient-to-br from-cyan-50 to-blue-100 rounded-xl p-8 shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-2 group">
                                <div class="flex items-center justify-center w-16 h-16 bg-cyan-500 text-white rounded-full mb-6 mx-auto group-hover:rotate-6 transition-transform duration-300">
                                    <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 9l3 3-3 3m5 0h3M5 20h14a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg>
                                </div>
                                <h3 class="text-2xl font-bold text-gray-900 mb-4 text-center">Gestion de Projets</h3>
                                <p class="text-gray-700 text-center leading-relaxed">
                                    Pilotage de projets web de A à Z, de l'idée à la mise en ligne, avec méthodologie agile.
                                </p>
                            </div>
                        </div>
                    </div>
                </section>

                <section class="py-16 md:py-24 bg-gradient-to-tr from-blue-500 to-blue-700 text-white shadow-inner">
                    <div class="container mx-auto px-6 text-center">
                        <h2 class="text-4xl font-extrabold mb-8">Prêt à explorer davantage ?</h2>
                        <div class="flex flex-col md:flex-row justify-center gap-6">
                            <a href="#publications" class="bg-white text-blue-600 px-8 py-4 rounded-full text-lg font-semibold shadow-xl hover:bg-gray-100 hover:scale-105 transition-all duration-300">
                                Voir mes Publications
                            </a>
                            <a href="#videos" class="bg-blue-800 text-white px-8 py-4 rounded-full text-lg font-semibold shadow-xl hover:bg-blue-700 hover:scale-105 transition-all duration-300">
                                Découvrir mes Vidéos
                            </a>
                        </div>
                    </div>
                </section>
            `;
        }

        async function fetchPodcasts() {
            const podcastPlayerContainer = document.getElementById('header-podcast-player-container');
            if (!podcastPlayerContainer) return;

            podcastPlayerContainer.innerHTML = `
                <div class="flex flex-col items-center justify-center py-2 px-4 text-blue-600">
                    <div class="animate-spin rounded-full h-5 w-5 border-t-2 border-b-2 border-blue-500 mb-0.5"></div>
                    <p class="text-xs font-semibold">Chargement...</p>
                </div>
            `;

            try {
                const response = await fetch(window.location.origin + '/api/podcasts');
                if (!response.ok) throw new Error('Failed to fetch podcasts');
                const data = await response.json();
                if (Array.isArray(data) && data.length > 0) {
                    allPodcasts = data.sort((a, b) => new Date(b.pubDate) - new Date(a.pubDate));
                    currentPodcastIndex = 0; // Start with the latest podcast
                    renderPodcastPlayer();
                } else {
                    podcastPlayerContainer.innerHTML = `
                        <p class="py-2 px-4 text-gray-600 text-sm">Aucun podcast trouvé.</p>
                    `;
                }
            } catch (error) {
                console.error('Error fetching podcasts:', error);
                podcastPlayerContainer.innerHTML = `
                    <div class="flex items-center px-4 py-2 text-red-500">
                        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                        <p class="text-sm">Erreur de chargement.</p>
                    </div>
                `;
            }
        }

        function renderPodcastPlayer() {
            const podcastPlayerContainer = document.getElementById('header-podcast-player-container');
            if (!podcastPlayerContainer || allPodcasts.length === 0) return;

            // Preserve current audio state if player already exists
            const existingAudioPlayer = document.getElementById('podcast-audio-player');
            const currentTime = existingAudioPlayer ? existingAudioPlayer.currentTime : 0;
            const isPaused = existingAudioPlayer ? existingAudioPlayer.paused : true;

            podcastPlayerContainer.innerHTML = `
                <audio id="podcast-audio-player" class="hidden"></audio>
                <div class="tooltip">
                    <button id="podcast-prev-button" class="p-1.5 rounded-full bg-blue-600 text-white hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 19l-7-7 7-7m8 14l-7-7 7-7"></path></svg>
                    </button>
                    <span id="podcast-prev-tooltip" class="tooltiptext"></span>
                </div>
                <div class="tooltip">
                    <button id="podcast-play-pause-button" class="p-2 rounded-full bg-blue-600 text-white hover:bg-blue-700 transition-colors">
                        <svg id="podcast-play-icon" class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                        <svg id="podcast-pause-icon" class="w-6 h-6 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 9v6m4-6v6m7-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                    </button>
                    <span id="podcast-play-pause-tooltip" class="tooltiptext"></span>
                </div>
                <div class="tooltip">
                    <button id="podcast-next-button" class="p-1.5 rounded-full bg-blue-600 text-white hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 5l7 7-7 7M6 5l7 7-7 7"></path></svg>
                    </button>
                    <span id="podcast-next-tooltip" class="tooltiptext"></span>
                </div>
            `;

            const podcastAudioPlayer = document.getElementById('podcast-audio-player');
            const podcastPlayPauseButton = document.getElementById('podcast-play-pause-button');
            const podcastPlayIcon = document.getElementById('podcast-play-icon');
            const podcastPauseIcon = document.getElementById('podcast-pause-icon');
            const podcastPrevButton = document.getElementById('podcast-prev-button');
            const podcastNextButton = document.getElementById('podcast-next-button');
            const podcastPrevTooltip = document.getElementById('podcast-prev-tooltip');
            const podcastPlayPauseTooltip = document.getElementById('podcast-play-pause-tooltip');
            const podcastNextTooltip = document.getElementById('podcast-next-tooltip');

            function updatePlayPauseButton(isPaused) {
                if (isPaused) {
                    podcastPlayIcon.classList.remove('hidden');
                    podcastPauseIcon.classList.add('hidden');
                } else {
                    podcastPlayIcon.classList.add('hidden');
                    podcastPauseIcon.classList.remove('hidden');
                }
            }

            function updatePodcastPlayerDisplay() {
                if (allPodcasts.length > 0) {
                    const currentPodcast = allPodcasts[currentPodcastIndex];
                    podcastAudioPlayer.src = currentPodcast.audioUrl;
                    if (!isPaused) { // Only attempt to play if it was playing
                        podcastAudioPlayer.currentTime = currentTime; // Restore time
                        podcastAudioPlayer.play().catch(e => console.log("Autoplay prevented for podcast:", e));
                    }

                    podcastPrevButton.disabled = currentPodcastIndex === 0;
                    podcastNextButton.disabled = currentPodcastIndex === allPodcasts.length - 1;

                    podcastPlayPauseTooltip.innerHTML = `<strong>${currentPodcast.title}</strong>`; // Changed this line as per request

                    if (currentPodcastIndex > 0) {
                        const prevPodcast = allPodcasts[currentPodcastIndex - 1];
                        podcastPrevTooltip.textContent = `Précédent: ${prevPodcast.title}`;
                    } else {
                        podcastPrevTooltip.textContent = 'Début de la playlist';
                    }

                    if (currentPodcastIndex < allPodcasts.length - 1) {
                        const nextPodcast = allPodcasts[currentPodcastIndex + 1];
                        podcastNextTooltip.textContent = `Suivant: ${nextPodcast.title}`;
                    } else {
                        podcastNextTooltip.textContent = 'Fin de la playlist';
                    }
                }
            }

            function playPausePodcast() {
                if (podcastAudioPlayer.paused) {
                    podcastAudioPlayer.play().catch(e => console.log("Autoplay prevented:", e));
                } else {
                    podcastAudioPlayer.pause();
                }
            }

            function nextPodcast() {
                if (currentPodcastIndex < allPodcasts.length - 1) {
                    currentPodcastIndex++;
                    updatePodcastPlayerDisplay();
                    podcastAudioPlayer.play().catch(e => console.log("Autoplay prevented:", e));
                } else {
                    podcastAudioPlayer.pause();
                    updatePlayPauseButton(true);
                }
            }

            function prevPodcast() {
                if (currentPodcastIndex > 0) {
                    currentPodcastIndex--;
                    updatePodcastPlayerDisplay();
                    podcastAudioPlayer.play().catch(e => console.log("Autoplay prevented:", e));
                }
            }

            podcastPlayPauseButton.addEventListener('click', playPausePodcast);
            podcastNextButton.addEventListener('click', nextPodcast);
            podcastPrevButton.addEventListener('click', prevPodcast);

            podcastAudioPlayer.addEventListener('play', () => updatePlayPauseButton(false));
            podcastAudioPlayer.addEventListener('pause', () => updatePlayPauseButton(true));
            podcastAudioPlayer.addEventListener('ended', nextPodcast);

            updatePodcastPlayerDisplay();
            updatePlayPauseButton(isPaused); // Restore play/pause state
        }


        async function renderPublicationsPage(page = 1) {
            mainContent.innerHTML = `
                <section class="container mx-auto px-6 py-10 md:py-16">
                    <h2 class="text-4xl font-extrabold text-gray-900 text-center mb-12">Mes Dernières Publications</h2>
                    <div id="publications-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                        <div class="col-span-full flex flex-col items-center justify-center p-8 text-blue-600">
                            <div class="animate-spin rounded-full h-12 w-12 border-t-4 border-b-4 border-blue-500 mb-4"></div>
                            <p class="text-lg font-semibold">Chargement des articles...</p>
                        </div>
                    </div>
                    <div id="publications-pagination" class="flex justify-center mt-12 space-x-2"></div>
                </section>
            `;
            const publicationsContainer = document.getElementById('publications-container');
            const publicationsPagination = document.getElementById('publications-pagination');

            if (allPosts.length === 0) {
                try {
                    const response = await fetch(window.location.origin + '/api/posts');
                    if (!response.ok) throw new Error('Failed to fetch posts');
                    const data = await response.json();
                    if (Array.isArray(data) && data.length > 0) {
                        allPosts = data.sort((a, b) => new Date(b.pubDate) - new Date(a.pubDate));
                    } else {
                        publicationsContainer.innerHTML = `<p class="col-span-full text-center text-gray-600 p-8">Aucune publication trouvée pour le moment.</p>`;
                        return;
                    }
                } catch (error) {
                    console.error('Error fetching posts:', error);
                    publicationsContainer.innerHTML = `
                        <div class="col-span-full text-center text-red-600 p-8">
                            <svg class="w-12 h-12 mb-4 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                            <p class="text-lg font-semibold">Erreur lors du chargement des publications.</p>
                            <p class="text-gray-600">Veuillez réessayer plus tard.</p>
                        </div>
                    `;
                    return;
                }
            }

            currentPostsPage = page;
            renderPosts(currentPostsPage);
            renderPostsPagination();

            function renderPosts(pageNumber) {
                publicationsContainer.innerHTML = '';
                const startIndex = (pageNumber - 1) * itemsPerPage;
                const endIndex = startIndex + itemsPerPage;
                const postsToDisplay = allPosts.slice(startIndex, endIndex);

                if (postsToDisplay.length === 0) {
                    publicationsContainer.innerHTML = `<p class="col-span-full text-center text-gray-600 p-8">Aucune publication trouvée pour cette page.</p>`;
                    return;
                }

                postsToDisplay.forEach(post => {
                    const postDate = new Date(post.pubDate).toLocaleDateString('fr-FR', { year: 'numeric', month: 'long', day: 'numeric' });
                    const card = document.createElement('div');
                    card.className = 'bg-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 overflow-hidden cursor-pointer group';
                    card.innerHTML = `
                        <img src="${post.image || 'https://via.placeholder.com/600x400/edf2f7/4a5568?text=Image+Article'}" alt="${post.title}" class="w-full h-48 object-cover group-hover:scale-105 transition-transform duration-500 ease-in-out">
                        <div class="p-6">
                            <h3 class="text-xl font-semibold text-gray-900 mb-2 group-hover:text-blue-600 transition-colors">${post.title}</h3>
                            <p class="text-gray-600 text-sm mb-4">${post.description ? post.description.substring(0, 120) + '...' : ''}</p>
                            <div class="flex justify-between items-center text-gray-500 text-xs">
                                <span>Par ${post.author || 'Inconnu'}</span>
                                <span>${postDate}</span>
                            </div>
                        </div>
                    `;
                    card.addEventListener('click', () => openArticleModal(post));
                    publicationsContainer.appendChild(card);
                });
            }

            function renderPostsPagination() {
                publicationsPagination.innerHTML = '';
                const totalPages = Math.ceil(allPosts.length / itemsPerPage);

                if (totalPages <= 1) return;

                const createButton = (text, pageNum, isActive = false, isDisabled = false) => {
                    const button = document.createElement('button');
                    button.textContent = text;
                    button.className = `px-4 py-2 rounded-lg transition-colors duration-200 ${
                        isActive ? 'bg-blue-600 text-white shadow-md' : 'bg-gray-200 text-gray-700 hover:bg-gray-300'
                    } ${isDisabled ? 'opacity-50 cursor-not-allowed' : 'hover:scale-105'}`;
                    button.disabled = isDisabled;
                    if (!isDisabled && !isActive) {
                        button.addEventListener('click', () => renderPublicationsPage(pageNum));
                    }
                    return button;
                };

                publicationsPagination.appendChild(createButton('Précédent', currentPostsPage - 1, false, currentPostsPage === 1));

                const maxPagesToShow = 5;
                let startPage = Math.max(1, currentPostsPage - Math.floor(maxPagesToShow / 2));
                let endPage = Math.min(totalPages, startPage + maxPagesToShow - 1);

                if (endPage - startPage + 1 < maxPagesToShow) {
                    startPage = Math.max(1, endPage - maxPagesToShow + 1);
                }

                if (startPage > 1) {
                    publicationsPagination.appendChild(createButton('1', 1));
                    if (startPage > 2) {
                        const dots = document.createElement('span');
                        dots.textContent = '...';
                        dots.className = 'px-4 py-2 text-gray-500';
                        publicationsPagination.appendChild(dots);
                    }
                }

                for (let i = startPage; i <= endPage; i++) {
                    publicationsPagination.appendChild(createButton(i.toString(), i, i === currentPostsPage));
                }

                if (endPage < totalPages) {
                    if (endPage < totalPages - 1) {
                        const dots = document.createElement('span');
                        dots.textContent = '...';
                        dots.className = 'px-4 py-2 text-gray-500';
                        publicationsPagination.appendChild(dots);
                    }
                    publicationsPagination.appendChild(createButton(totalPages.toString(), totalPages));
                }

                publicationsPagination.appendChild(createButton('Suivant', currentPostsPage + 1, false, currentPostsPage === totalPages));
            }
        }

        async function renderVideosPage(page = 1) {
            mainContent.innerHTML = `
                <section class="container mx-auto px-6 py-10 md:py-16">
                    <h2 class="text-4xl font-extrabold text-gray-900 text-center mb-12">Mes Dernières Vidéos</h2>
                    <div id="videos-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                        <div class="col-span-full flex flex-col items-center justify-center p-8 text-blue-600">
                            <div class="animate-spin rounded-full h-12 w-12 border-t-4 border-b-4 border-blue-500 mb-4"></div>
                            <p class="text-lg font-semibold">Chargement des vidéos...</p>
                        </div>
                    </div>
                    <div id="videos-pagination" class="flex justify-center mt-12 space-x-2"></div>
                </section>
            `;
            const videosContainer = document.getElementById('videos-container');
            const videosPagination = document.getElementById('videos-pagination');

            if (allVideos.length === 0) {
                try {
                    const response = await fetch(window.location.origin + '/api/videos');
                    if (!response.ok) throw new Error('Failed to fetch videos');
                    const data = await response.json();
                    if (Array.isArray(data) && data.length > 0) {
                        allVideos = data.sort((a, b) => new Date(b.published) - new Date(a.published));
                    } else {
                        videosContainer.innerHTML = `<p class="col-span-full text-center text-gray-600 p-8">Aucune vidéo trouvée pour le moment.</p>`;
                        return;
                    }
                } catch (error) {
                    console.error('Error fetching videos:', error);
                    videosContainer.innerHTML = `
                        <div class="col-span-full text-center text-red-600 p-8">
                            <svg class="w-12 h-12 mb-4 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                            <p class="text-lg font-semibold">Erreur lors du chargement des vidéos.</p>
                            <p class="text-gray-600">Veuillez réessayer plus tard.</p>
                        </div>
                    `;
                    return;
                }
            }

            currentVideosPage = page;
            renderVideos(currentVideosPage);
            renderVideosPagination();

            function renderVideos(pageNumber) {
                videosContainer.innerHTML = '';
                const startIndex = (pageNumber - 1) * itemsPerPage;
                const endIndex = startIndex + itemsPerPage;
                const videosToDisplay = allVideos.slice(startIndex, endIndex);

                if (videosToDisplay.length === 0) {
                    videosContainer.innerHTML = `<p class="col-span-full text-center text-gray-600 p-8">Aucune vidéo trouvée pour cette page.</p>`;
                    return;
                }

                videosToDisplay.forEach(video => {
                    const videoDate = new Date(video.published).toLocaleDateString('fr-FR', { year: 'numeric', month: 'long', day: 'numeric' });
                    const card = document.createElement('div');
                    card.className = 'bg-transparent rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 overflow-hidden cursor-pointer group relative aspect-video';
                    card.innerHTML = `
                        <img src="${video.thumbnail || 'https://via.placeholder.com/600x338/edf2f7/4a5568?text=Vid%C3%A9o'}" alt="${video.title}" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500 ease-in-out absolute inset-0">
                        <!-- Play overlay -->
                        <div class="absolute inset-0 bg-black/50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300 z-10">
                            <div class="p-4 bg-blue-600 rounded-full shadow-xl transform group-hover:scale-110 transition-transform duration-300">
                                <svg class="w-8 h-8 text-white" fill="currentColor" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
                            </div>
                        </div>
                        <!-- Title and Date overlay -->
                        <div class="p-4 absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent z-10">
                            <h3 class="text-lg font-semibold text-white mb-1 leading-tight group-hover:text-blue-400 transition-colors">${video.title}</h3>
                            <p class="text-gray-200 text-xs">${videoDate}</p>
                        </div>
                    `;
                    card.addEventListener('click', () => openVideoModal(video.link));
                    videosContainer.appendChild(card);
                });
            }

            function renderVideosPagination() {
                videosPagination.innerHTML = '';
                const totalPages = Math.ceil(allVideos.length / itemsPerPage);

                if (totalPages <= 1) return;

                const createButton = (text, pageNum, isActive = false, isDisabled = false) => {
                    const button = document.createElement('button');
                    button.textContent = text;
                    button.className = `px-4 py-2 rounded-lg transition-colors duration-200 ${
                        isActive ? 'bg-blue-600 text-white shadow-md' : 'bg-gray-200 text-gray-700 hover:bg-gray-300'
                    } ${isDisabled ? 'opacity-50 cursor-not-allowed' : 'hover:scale-105'}`;
                    button.disabled = isDisabled;
                    if (!isDisabled && !isActive) {
                        button.addEventListener('click', () => renderVideosPage(pageNum));
                    }
                    return button;
                };

                videosPagination.appendChild(createButton('Précédent', currentVideosPage - 1, false, currentVideosPage === 1));

                const maxPagesToShow = 5;
                let startPage = Math.max(1, currentVideosPage - Math.floor(maxPagesToShow / 2));
                let endPage = Math.min(totalPages, startPage + maxPagesToShow - 1);

                if (endPage - startPage + 1 < maxPagesToShow) {
                    startPage = Math.max(1, endPage - maxPagesToShow + 1);
                }

                if (startPage > 1) {
                    videosPagination.appendChild(createButton('1', 1));
                    if (startPage > 2) {
                        const dots = document.createElement('span');
                        dots.textContent = '...';
                        dots.className = 'px-4 py-2 text-gray-500';
                        videosPagination.appendChild(dots);
                    }
                }

                for (let i = startPage; i <= endPage; i++) {
                    videosPagination.appendChild(createButton(i.toString(), i, i === currentVideosPage));
                }

                if (endPage < totalPages) {
                    if (endPage < totalPages - 1) {
                        const dots = document.createElement('span');
                        dots.textContent = '...';
                        dots.className = 'px-4 py-2 text-gray-500';
                        videosPagination.appendChild(dots);
                    }
                    videosPagination.appendChild(createButton(totalPages.toString(), totalPages));
                }

                videosPagination.appendChild(createButton('Suivant', currentVideosPage + 1, false, currentVideosPage === totalPages));
            }
        }

        async function renderContactPage() {
            mainContent.innerHTML = `
                <section class="container mx-auto px-6 py-10 md:py-16">
                    <h2 class="text-4xl font-extrabold text-gray-900 text-center mb-12">Me Contacter</h2>
                    <div class="max-w-xl mx-auto bg-white rounded-xl shadow-lg p-8 md:p-10">
                        <form id="contact-form" class="space-y-6">
                            <div>
                                <label for="name" class="block text-sm font-medium text-gray-700 mb-2">Nom Complet</label>
                                <input type="text" id="name" name="name" class="block w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm" required>
                            </div>
                            <div>
                                <label for="email" class="block text-sm font-medium text-gray-700 mb-2">Adresse E-mail</label>
                                <input type="email" id="email" name="email" class="block w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm" required>
                            </div>
                            <div>
                                <label for="subject" class="block text-sm font-medium text-gray-700 mb-2">Sujet</label>
                                <input type="text" id="subject" name="subject" class="block w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm" required>
                            </div>
                            <div>
                                <label for="message" class="block text-sm font-medium text-gray-700 mb-2">Message</label>
                                <textarea id="message" name="message" rows="5" class="block w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm" required></textarea>
                            </div>
                            <button type="submit" class="w-full flex justify-center py-3 px-4 border border-transparent rounded-md shadow-sm text-lg font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-300 transform hover:scale-105">
                                Envoyer le Message
                            </button>
                            <div id="form-status" class="mt-4 text-center text-sm font-medium"></div>
                        </form>
                    </div>
                </section>
            `;

            const contactForm = document.getElementById('contact-form');
            const formStatus = document.getElementById('form-status');

            if (contactForm) {
                contactForm.addEventListener('submit', async (e) => {
                    e.preventDefault();
                    formStatus.className = 'mt-4 text-center text-blue-600';
                    formStatus.textContent = 'Envoi en cours...';

                    const formData = new FormData(contactForm);
                    const payload = {};
                    for (const [key, value] of formData.entries()) {
                        payload[key] = value;
                    }

                    try {
                        const response = await fetch(window.location.origin + '/api/contact', {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json',
                            },
                            body: JSON.stringify(payload),
                        });

                        if (response.ok) {
                            formStatus.className = 'mt-4 text-center text-green-600';
                            formStatus.textContent = 'Message envoyé avec succès !';
                            contactForm.reset();
                        } else {
                            const errorData = await response.json();
                            throw new Error(errorData.message || 'Échec de l\'envoi du message.');
                        }
                    } catch (error) {
                        console.error('Error submitting contact form:', error);
                        formStatus.className = 'mt-4 text-center text-red-600';
                        formStatus.textContent = `Erreur: ${error.message}`;
                    }
                });
            }
        }

        function openArticleModal(article) {
            document.getElementById('modal-article-image').src = article.image || 'https://via.placeholder.com/800x400/edf2f7/4a5568?text=Image+de+Couverture';
            document.getElementById('modal-article-title').textContent = article.title;
            document.getElementById('modal-article-author').textContent = article.author || 'Inconnu';
            const pubDate = new Date(article.pubDate).toLocaleDateString('fr-FR', { year: 'numeric', month: 'long', day: 'numeric' });
            document.getElementById('modal-article-pubdate').textContent = pubDate;
            document.getElementById('modal-article-body').innerHTML = article.content;

            const shareUrl = encodeURIComponent(article.link || window.location.href);
            const shareTitle = encodeURIComponent(article.title);

            document.getElementById('share-facebook').href = `https://www.facebook.com/sharer/sharer.php?u=${shareUrl}`;
            document.getElementById('share-twitter').href = `https://twitter.com/intent/tweet?url=${shareUrl}&text=${shareTitle}`;
            document.getElementById('share-linkedin').href = `https://www.linkedin.com/shareArticle?mini=true&url=${shareUrl}&title=${shareTitle}`;
            document.getElementById('share-mail').href = `mailto:?subject=${shareTitle}&body=${shareUrl}`;

            openModalWithTransition(articleModal);
        }

        function openVideoModal(videoLink) {
            const embedLink = videoLink.replace("watch?v=", "embed/");
            videoPlayer.src = embedLink + '?autoplay=1'; // Autoplay video
            openModalWithTransition(videoModal);
        }

        // Mobile menu toggle logic
        mobileMenuButton.addEventListener('click', () => {
            mobileMenu.classList.remove('translate-x-full');
            mobileMenu.classList.add('translate-x-0');
            mobileMenuOverlay.classList.remove('hidden');
            document.body.classList.add('overflow-hidden');
        });

        closeMobileMenu.addEventListener('click', () => {
            mobileMenu.classList.remove('translate-x-0');
            mobileMenu.classList.add('translate-x-full');
            mobileMenuOverlay.classList.add('hidden');
            document.body.classList.remove('overflow-hidden');
        });

        mobileMenuOverlay.addEventListener('click', () => {
            closeMobileMenu.click();
        });

        // Navigation and routing
        function updateActiveNavLink(hash) {
            document.querySelectorAll('.header-nav-link').forEach(link => {
                const span = link.querySelector('span');
                if (link.getAttribute('href') === hash) {
                    link.classList.add('text-blue-600', 'font-semibold');
                    link.classList.remove('text-gray-600');
                    if (span) span.style.width = '100%';
                } else {
                    link.classList.remove('text-blue-600', 'font-semibold');
                    link.classList.add('text-gray-600');
                    if (span) span.style.width = '0px';
                }
            });
            document.querySelectorAll('.footer-nav-link').forEach(link => {
                if (link.getAttribute('href') === hash) {
                    link.classList.add('text-white');
                    link.classList.remove('text-gray-300');
                } else {
                    link.classList.remove('text-white');
                    link.classList.add('text-gray-300');
                }
            });
            document.querySelectorAll('#mobile-menu a').forEach(link => {
                if (link.getAttribute('href') === hash) {
                    link.classList.add('text-blue-600', 'font-semibold');
                    link.classList.remove('text-gray-700');
                } else {
                    link.classList.remove('text-blue-600', 'font-semibold');
                    link.classList.add('text-gray-700');
                }
            });
        }

        async function handleRouting() {
            closeAllModals(); // Close modals but not the podcast player
            closeMobileMenu.click();
            const hash = window.location.hash || '#home';
            updateActiveNavLink(hash);
            showLoading(); // Show loading indicator while content is being fetched/rendered

            switch (hash) {
                case '#home':
                    await renderHomePage();
                    break;
                case '#publications':
                    await renderPublicationsPage();
                    break;
                case '#videos':
                    await renderVideosPage();
                    break;
                case '#contact':
                    await renderContactPage();
                    break;
                default:
                    await renderHomePage(); // Fallback to home page
                    break;
            }
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        window.addEventListener('hashchange', handleRouting);
        window.addEventListener('DOMContentLoaded', () => {
            fetchMetadata();
            fetchPodcasts(); // Fetch podcasts on initial load
            handleRouting();
        });
    </script>
</body>
</html>